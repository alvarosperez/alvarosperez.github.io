<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

        <link href='http://fonts.googleapis.com/css?family=Titillium+Web:400,200,300,600,700,900' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="bower_components/leaflet/dist/leaflet.css" />
        <link rel="stylesheet" href="css/combined_example.css" />

        <link  rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css">

    	<link rel="stylesheet" href="bower_components/leaflet.markercluster/dist/MarkerCluster.css" />
    	<link rel="stylesheet" href="bower_components/leaflet.markercluster/dist/MarkerCluster.Default.css" />

        <!--Leaflet awesome markers-->
        <link rel="stylesheet" href="bower_components/Leaflet.awesome-markers/dist/leaflet.awesome-markers.css">

        <title>Basic Static Map Example, only points</title>

        <script src="bower_components/jquery/jquery.min.js" charset="utf-8"></script>
        <script src="bower_components/d3/d3.min.js" charset="utf-8"></script>
        <script src="bower_components/leaflet/dist/leaflet.js" charset="utf-8"></script>
        <script src="bower_components/leaflet-providers/leaflet-providers.js" charset="utf-8"></script>
        <script src="common/js/3rdparty/QuadTree.js" charset="utf-8"></script>
        <script src="common/js/3rdparty/heatmap.js" charset="utf-8"></script>
        <script src="common/js/3rdparty/heatmap-leaflet.js" charset="utf-8"></script>

        <!--Leaflet awesome markers-->
        <script src="bower_components/Leaflet.awesome-markers/dist/leaflet.awesome-markers.js" charset="utf-8"></script>

        <!--Leaflet marker cluster-->
        <script src="bower_components/leaflet.markercluster/dist/leaflet.markercluster.js"></script>

        <script src="js/combined_example.js" charset="utf-8"></script>
        <script src="lib/submarine.js" charset="utf-8"></script>
    </head>

    <body>
            <div id="map" class="map"></div>

            <script type="text/javascript">

                self = {};

                // Controller object
                self.mapObj = submarine.controller.basicStatic("map","map",
                    {
                        'baseJUrl':"data/",
                        'config':
                        {
                          'heatmaps':
                          {
                                'cultura':
                                {
                                    'file':'cultura.json',
                                    'options':
                                    {
                                        'radius': { value: 60, absolute: true },
                                        'opacity': 0.8,
                                        'gradient': {
                                            0.45: "rgb(0,0,255)",
                                            0.55: "rgb(0,255,255)",
                                            0.65: "rgb(0,255,0)",
                                            0.95: "yellow",
                                            1.0: "rgb(255,0,0)"
                                        }
                                    },
                                    'heatValue': function(feature){ return 1;}
                                },
                                'deportes':
                                {
                                    'file':'esports.json',
                                    'options':
                                    {
                                        'radius': { value: 60, absolute: true },
                                        'opacity': 1.0,
                                        'gradient': {
                                            0.45: "rgb(0,0,255)",
                                            0.55: "rgb(0,255,255)",
                                            0.65: "rgb(0,255,0)",
                                            0.95: "yellow",
                                            1.0: "rgb(255,0,0)"
                                        }
                                    },
                                    'heatValue': function(feature){ return 1;}

                                }
                          },
                          'polygons':
                          {
                              'renta':
                              {
                                  'file': 'bcn_renta.json'
                              },
                              'random':
                              {
                                  'file': 'bcn_random.json'
                              }
                          },
                          'markers':
                          {
                                'cultura':
                                {
                                    'file':'cultura.json',
                                    'clustering': true,
                                    'iconSelect': function(d,i){ return "book";},
                                    'tooltipContent':function(d,i){

                                        var catInfo = [];

                                        for(var j=0;j< d.properties.cats.length;j++)
                                        {
                                            catInfo.push(d.properties.cats[j]);
                                        }
                                        return d.properties.name + "</br>" + d.properties.address + "</br>" + catInfo.join(", ");
                                    }
                                },
                                'deportes':
                                {
                                    'file':'esports.json',
                                    'clustering': true,
                                    'iconSelect': function(d,i){ return "default";},
                                    'tooltipContent':function(d,i){

                                        var catInfo = [];

                                        for(var j=0;j< d.properties.cats.length;j++)
                                        {
                                            catInfo.push(d.properties.cats[j]);
                                        }
                                        return d.properties.name + "</br>" + d.properties.address + "</br>" + catInfo.join(", ");
                                    },
                                    'options': {showCoverageOnHover: false}
                                }
                          }
                        },
                        'markerDefFile': 'marker_def.json',
                        'transTime':1500,
                        'debugLevel':3,
                        'vizOptions':
                        {
                            'tileLayer': L.tileLayer.provider('Stamen.TonerLite'),
                            'initLatLng': [41.40,2.15],
                            'mapOptions':{
                                                'zoom': 12,
                                                'maxZoom': 16
                            },
                            'hideOnZoom': false
                        }
                    });
            </script>
    </body>
</html>
